<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<VBox prefHeight="600"
      prefWidth="500"
      spacing="15"
      style="-fx-background-color: #E5E5E5; -fx-background-radius: 8;"
      xmlns="http://javafx.com/javafx/25"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.coffrefort.client.controllers.UploadDialogController">

    <padding>
        <Insets bottom="20" left="25" right="25" top="20" />
    </padding>

    <children>
        <!-- En-tÃªte avec logo et titre -->
        <HBox alignment="CENTER_LEFT" spacing="15">
            <ImageView fitHeight="50" fitWidth="65" pickOnBounds="true" preserveRatio="true">
                <image>
                    <Image url="@/images/Logo_CryptoVault.png" />
                </image>
            </ImageView>

            <VBox spacing="2">
                <Text fill="#980b0b"
                      style="-fx-font-weight: bold; -fx-font-size: 18px;"
                      text="ðŸ“¤ Uploader des fichiers"
                      textAlignment="CENTER"
                      wrappingWidth="288.48866271972656" />
                <Text fill="#666666" style="-fx-font-size: 11px;"
                      text="SÃ©lectionnez les fichiers Ã  tÃ©lÃ©verser"
                      textAlignment="CENTER"
                      wrappingWidth="289.14794921875" />
            </VBox>
        </HBox>

        <Separator>
            <VBox.margin>
                <Insets bottom="5" top="5" />
            </VBox.margin>
        </Separator>

        <!-- Zone de sÃ©lection de fichiers -->
        <VBox spacing="12"
              style="-fx-background-color: white; -fx-background-radius: 6; -fx-border-color: #cccccc; -fx-border-width: 1; -fx-border-radius: 6;"
              VBox.vgrow="ALWAYS">
            <padding>
                <Insets bottom="15" left="15" right="15" top="15" />
            </padding>

            <!-- Bouton de sÃ©lection -->
            <HBox alignment="CENTER" spacing="15">
                <Button fx:id="selectFileButton"
                        onAction="#handleSelectFile"
                        prefHeight="39.0"
                        prefWidth="177.0"
                        style="-fx-background-color: #980b0b; -fx-text-fill: white; -fx-background-radius: 4; -fx-cursor: hand; -fx-padding: 10 20;"
                        text="ðŸ“ Choisir un fichier"
                        textAlignment="CENTER">
                    <font>
                        <Font size="13" />
                    </font>
                    <effect>
                        <DropShadow height="8.0"
                                    offsetX="1.0"
                                    offsetY="1.0"
                                    radius="3.5"
                                    width="8.0">
                            <color>
                                <Color red="0.6"
                                       green="0.04"
                                       blue="0.04"
                                       opacity="0.3" />
                            </color>
                        </DropShadow>
                    </effect>
                </Button>

                <Text fill="#999999" style="-fx-font-size: 12px;" />
            </HBox>

            <Separator>
                <VBox.margin>
                    <Insets bottom="5" top="5" />
                </VBox.margin>
            </Separator>

            <!-- Liste des fichiers sÃ©lectionnÃ©s -->
            <VBox fx:id="fileListContainer" spacing="8" VBox.vgrow="ALWAYS">
                <Label style="-fx-text-fill: #333333; -fx-font-weight: bold; -fx-font-size: 12px;"
                       text="Fichiers sÃ©lectionnÃ©s :" />

                <!-- Zone scrollable pour les fichiers -->
                <VBox fx:id="selectedFilesList"
                      minHeight="120"
                      spacing="6"
                      style="-fx-background-color: #f8f8f8; -fx-background-radius: 4; -fx-padding: 10; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;"
                      VBox.vgrow="ALWAYS">

                    <Label fx:id="noFileLabel"
                           alignment="CENTER"
                           maxWidth="Infinity"
                           style="-fx-text-fill: #999999; -fx-font-style: italic; -fx-font-size: 11px;"
                           text="Aucun fichier sÃ©lectionnÃ©" />
                </VBox>
            </VBox>

            <!-- Nom du fichier (optionnel) -->
            <VBox spacing="5">
                <Label style="-fx-text-fill: #333333; -fx-font-size: 11px;"
                       text="Nom personnalisÃ© (optionnel) :" />
                <TextField fx:id="customNameField"
                           promptText="Laissez vide pour garder le nom original"
                           style="-fx-background-radius: 4; -fx-border-color: #cccccc; -fx-border-width: 1; -fx-border-radius: 4;">
                    <effect>
                        <DropShadow height="5.0"
                                    offsetX="1.0"
                                    offsetY="1.0"
                                    radius="2.0"
                                    width="5.0">
                            <color>
                                <Color red="0.6"
                                       green="0.04"
                                       blue="0.04"
                                       opacity="0.15" />
                            </color>
                        </DropShadow>
                    </effect>
                </TextField>
            </VBox>
        </VBox>

        <!-- Barre de progression (cachÃ©e par dÃ©faut) -->
        <VBox fx:id="progressContainer" managed="false" spacing="5" visible="false">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label fx:id="progressLabel"
                       style="-fx-text-fill: #980b0b; -fx-font-weight: bold; -fx-font-size: 12px;"
                       text="Upload en cours..." />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="progressPercentLabel"
                       style="-fx-text-fill: #666666; -fx-font-size: 11px;"
                       text="0%" />
            </HBox>

            <ProgressBar fx:id="uploadProgressBar"
                         prefHeight="10"
                         prefWidth="Infinity"
                         style="-fx-accent: #980b0b;">
                <effect>
                    <DropShadow height="5.0"
                                offsetX="1.0"
                                offsetY="1.0"
                                radius="2.0"
                                width="5.0">
                        <color>
                            <Color red="0.6" green="0.04" blue="0.04" opacity="0.2" />
                        </color>
                    </DropShadow>
                </effect>
            </ProgressBar>
        </VBox>

        <!-- Messages d'erreur ou succÃ¨s -->
        <Label fx:id="messageLabel"
               managed="false"
               style="-fx-padding: 10; -fx-background-radius: 4; -fx-font-size: 12px;"
               visible="false" wrapText="true" />

        <!-- Boutons d'action -->
        <HBox alignment="CENTER_RIGHT" spacing="12">
            <VBox.margin>
                <Insets top="10" />
            </VBox.margin>

            <Button fx:id="cancelButton"
                    onAction="#handleCancel"
                    style="-fx-background-color: #cccccc; -fx-text-fill: #333333; -fx-background-radius: 4; -fx-cursor: hand; -fx-padding: 8 20;"
                    text="Annuler">
                <font>
                    <Font size="12" />
                </font>
            </Button>

            <Button fx:id="uploadButton"
                    defaultButton="true"
                    disable="true"
                    onAction="#handleUpload"
                    style="-fx-background-color: #980b0b; -fx-text-fill: white; -fx-background-radius: 4; -fx-cursor: hand; -fx-padding: 8 24; -fx-font-weight: bold;"
                    text="ðŸ“¤ Uploader">
                <font>
                    <Font size="12" />
                </font>
                <effect>
                    <DropShadow height="10.0"
                                offsetX="2.0"
                                offsetY="2.0"
                                radius="4.5"
                                width="10.0">
                        <color>
                            <Color red="0.6"
                                   green="0.04"
                                   blue="0.04"
                                   opacity="0.4" />
                        </color>
                    </DropShadow>
                </effect>
            </Button>
        </HBox>

    </children>
</VBox>
